<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>THE INDEX: PIXEL_WILL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">

  <style>
    :root {
      --index-cyan: #00f2ff;
      --index-red: #ff003c;
      --current-theme: var(--index-cyan);
    }

    html, body { 
      margin: 0; height: 100%; 
      background-color: #020202; 
      color: var(--current-theme);
      font-family: 'Pixelify Sans', sans-serif; 
      display: flex; justify-content: center; align-items: center;
      overflow: hidden; transition: color 1.5s ease;
    }

    body::before {
      content: " "; display: block; position: absolute;
      top: 0; left: 0; bottom: 0; right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.3) 50%), 
                  linear-gradient(90deg, rgba(255, 0, 0, 0.05), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.05));
      z-index: 100; background-size: 100% 4px, 4px 100%; pointer-events: none;
    }

    #container {
      text-align: center; padding: 40px; width: 90%; max-width: 800px;
      position: relative; z-index: 10;
    }

    #header { 
      font-size: 14px; letter-spacing: 3px; margin-bottom: 20px; opacity: 0.7; 
      text-shadow: 0 0 8px var(--current-theme); 
    }
    
    #prescript-text { 
      font-size: 24px; line-height: 1.6; min-height: 180px; 
      text-shadow: 0 0 10px var(--current-theme); 
      font-weight: 500;
    }

    .cursor {
      display: inline-block; width: 12px; height: 22px;
      background-color: var(--current-theme); margin-left: 5px;
      vertical-align: middle; animation: blink 0.5s step-end infinite;
    }

    @keyframes blink { 50% { opacity: 0; } }
  </style>
</head>

<body>
  <div id="container">
    <div id="header">Transmission Established</div>
    <div id="prescript-text">Decoding the Will...</div>
  </div>

  <script>
    const dictionary = {
      action: ["Talk to", "Hand a coin to", "Whisper to", "Follow", "Nod at", "Blink at", "Point toward", "Avoid", "Touch the shoulder of", "Trace a circle near"],
      who: ["a man in a dark coat", "the first woman you see", "a stranger with a hat", "a child playing alone", "someone leaning against a wall", "a person looking at their phone", "the nearest Proxy", "a shopkeeper", "someone walking quickly", "a man with glasses"],
      when: ["when the clock strikes 3", "during the start of the evening", "after the sun goes down", "when you hear a bird chirp", "as soon as you see a red car", "while the streetlights flicker", "exactly 10 minutes from now", "when the wind picks up", "at the moment of sunset"],
      topic: ["about your oldest memory", "regarding the Will of the City", "about a secret you kept", "about the color of the sky", "regarding your current debt", "about a dream you had", "concerning the Index", "about things that don't matter", "regarding your next move"],
      where: ["near the nearest drainage pipe.", "inside a quiet hallway.", "at the center of the intersection.", "under the shadow of a tall building.", "while standing on one leg.", "without making any eye contact.", "and then walk away immediately.", "until the transition is complete."]
    };

    const displayElement = document.getElementById('prescript-text');

    function generatePrescript() {
      if (Math.random() < 0.10) {
        document.documentElement.style.setProperty('--current-theme', 'var(--index-red)');
        return "Critical: Do not speak to anyone until the sun rises tomorrow.";
      }
      document.documentElement.style.setProperty('--current-theme', 'var(--index-cyan)');
      const d = dictionary;
      const res = [d.action, d.who, d.when, d.topic, d.where].map(list => list[Math.floor(Math.random() * list.length)]);
      return res.join(" ");
    }

    function decodeText(text) {
      let iterations = 0;
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';
      const interval = setInterval(() => {
        displayElement.innerHTML = text.split("").map((char, index) => {
          if (index < iterations) return text[index];
          return characters[Math.floor(Math.random() * characters.length)];
        }).join("") + '<span class="cursor"></span>';

        if (iterations >= text.length) clearInterval(interval);
        iterations += 1/3; 
      }, 30);
    }

    window.onload = () => {
      const finalWill = generatePrescript();
      setTimeout(() => decodeText(finalWill), 800);
    };
  </script>
</body>
</html>
