<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>THE INDEX: TERMINAL_READOUT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

  <style>
    :root {
      --index-cyan: #00f2ff;
      --index-red: #ff003c;
      --current-theme: var(--index-cyan);
    }

    html, body { 
      margin: 0; height: 100%; 
      background-color: #020202; 
      color: var(--current-theme);
      font-family: 'VT323', monospace; 
      display: flex; justify-content: center; align-items: center;
      overflow: hidden; transition: color 1.5s ease;
    }

    /* CRT SCANLINES */
    body::before {
      content: " "; display: block; position: absolute;
      top: 0; left: 0; bottom: 0; right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.3) 50%), 
                  linear-gradient(90deg, rgba(255, 0, 0, 0.05), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.05));
      z-index: 100; background-size: 100% 4px, 4px 100%; pointer-events: none;
    }

    #container {
      text-align: center; padding: 40px; width: 90%; max-width: 800px;
      position: relative; z-index: 10;
    }

    #header { 
      font-size: 16px; /* Smaller Header */
      letter-spacing: 4px; margin-bottom: 20px; opacity: 0.7; 
      text-shadow: 0 0 8px var(--current-theme); 
    }

    #logo { 
      width: 150px; /* Scaled down logo */
      height: auto; margin-bottom: 30px; opacity: 0.8; 
    }
    
    #prescript-text { 
      font-size: 28px; /* Smaller, more readable text */
      line-height: 1.5; min-height: 180px; 
      text-shadow: 0 0 10px var(--current-theme); 
      letter-spacing: 1px;
    }

    .cursor {
      display: inline-block; width: 10px; height: 24px;
      background-color: var(--current-theme); margin-left: 5px;
      vertical-align: middle; animation: blink 0.5s step-end infinite;
    }

    @keyframes blink { 50% { opacity: 0; } }
  </style>
</head>

<body>
  <div id="container">
    <div id="header">Transmission Established</div>
    <img id="logo" src="index_logo.png" alt="THE INDEX">
    <div id="prescript-text">Connecting to the Will...</div>
  </div>

  <script>
    const dictionary = {
      action: ["Talk to", "Hand a coin to", "Whisper to", "Follow", "Nod at", "Blink at", "Point toward", "Avoid", "Touch the shoulder of", "Trace a circle near"],
      who: ["a man in a dark coat", "the first woman you see", "a stranger with a hat", "a child playing alone", "someone leaning against a wall", "a person looking at their phone", "the nearest Proxy", "a shopkeeper", "someone walking quickly", "a man with glasses"],
      when: ["when the clock strikes 3", "during the start of the evening", "after the sun goes down", "when you hear a bird chirp", "as soon as you see a red car", "while the streetlights flicker", "exactly 10 minutes from now", "when the wind picks up", "at the moment of sunset"],
      topic: ["about your oldest memory", "regarding the Will of the City", "about a secret you kept", "about the color of the sky", "regarding your current debt", "about a dream you had", "concerning the Index", "about things that don't matter", "regarding your next move"],
      where: ["near the nearest drainage pipe.", "inside a quiet hallway.", "at the center of the intersection.", "under the shadow of a tall building.", "while standing on one leg.", "without making any eye contact.", "and then walk away immediately.", "until the transition is complete."]
    };

    function generatePrescript() {
      if (Math.random() < 0.10) {
        document.documentElement.style.setProperty('--current-theme', 'var(--index-red)');
        return "Critical: Do not speak to anyone until the sun rises tomorrow.";
      }

      const a = dictionary.action[Math.floor(Math.random() * dictionary.action.length)];
      const w = dictionary.who[Math.floor(Math.random() * dictionary.who.length)];
      const t = dictionary.when[Math.floor(Math.random() * dictionary.when.length)];
      const to = dictionary.topic[Math.floor(Math.random() * dictionary.topic.length)];
      const wh = dictionary.where[Math.floor(Math.random() * dictionary.where.length)];

      return `${a} ${w} ${t} ${to} ${wh}`;
    }

    function decodeText(text) {
      let iterations = 0;
      const characters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      const interval = setInterval(() => {
        displayElement.innerHTML = text.split("").map((char, index) => {
          if (index < iterations) return text[index];
          return characters[Math.floor(Math.random() * characters.length)];
        }).join("") + '<span class="cursor"></span>';

        if (iterations >= text.length) clearInterval(interval);
        iterations += 0.8; // Faster decoding for longer text
      }, 20);
    }

    const displayElement = document.getElementById('prescript-text');

    window.onload = () => {
      const finalWill = generatePrescript(); // No .toUpperCase() anymore
      setTimeout(() => decodeText(finalWill), 800);
    };
  </script>
</body>
</html>
      const ta = targets[Math.floor(Math.random() * targets.length)];
      const m = methods[Math.floor(Math.random() * methods.length)];
      const s = seals[Math.floor(Math.random() * seals.length)];
      
      return `${t} ${v} ${n} ${ta} ${m} ${s}`;
    }

    function cycleText(targetText) {
      let iterations = 0;
      const interval = setInterval(() => {
        displayElement.innerHTML = targetText.split("").map((char, index) => {
          if (index < iterations) return targetText[index];
          return characters[Math.floor(Math.random() * characters.length)];
        }).join("") + '<span class="cursor"></span>';

        if (iterations >= targetText.length) clearInterval(interval);
        iterations += 0.4; // Controlled speed for long sentences
      }, 30); 
    }

    window.addEventListener('load', () => {
      const finalWill = generate().toUpperCase();
      setTimeout(() => cycleText(finalWill), 1200);
    });
  </script>
</body>
</html>
